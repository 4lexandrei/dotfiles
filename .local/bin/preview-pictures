#!/bin/bash

# ┌──────────────────┐
# │ preview-pictures │
# └──────────────────┘
# Preview pictures in fzf with kitty icat

picture_dir="$HOME/Pictures"
dir=$1

dir="${dir:-$picture_dir}"

if [[ ! -d "$picture_dir" ]]; then
  printf "Directory not found: %s\n" "$picture_dir"
  exit 1
fi

find "$dir" -type f -print0 | xargs -0 file --mime-type | grep -F 'image/' | cut -d ':' -f 1 | fzf \
  --preview "kitten icat --clear --transfer-mode=memory --stdin=no --unicode-placeholder --place=\"\${FZF_PREVIEW_COLUMNS}x\${FZF_PREVIEW_LINES}@0x0\" {}"
